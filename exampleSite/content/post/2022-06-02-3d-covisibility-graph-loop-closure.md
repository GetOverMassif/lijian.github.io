---
title: "📜论文阅读 | 利用三维语义共视图实现语义SLAM中闭环的精准检测"
date: 2022-06-02
lastmod: 2022-06-02
draft: false
tags: ["loop closure", "object"]
categories: ["slam", "论文阅读"]
author: "lijian"
---

>**面向更鲁棒闭环的拓扑可感的物体级语义建图**
>
>Qian Z, Fu J, Xiao J. [Towards Accurate Loop Closure Detection in Semantic SLAM with 3D Semantic Covisibility Graphs](extension://idghocbbahafpfhjnfhpbfbmpegphmmp/assets/pdf/web/viewer.html?file=https%3A%2F%2Ffujie.ece.ufl.edu%2Fwp-content%2Fuploads%2Fsites%2F79%2F2022%2F02%2FSemanticSLAM-Covisibility-RAL2022.pdf)[J]. IEEE Robotics and Automation Letters, 2022.（**RAL 2022**）
>
>美国 伍斯特理工学院 机器人工程系 [主页](https://www.wpi.edu/academics/departments/robotics-engineering)

## 【Thinking】论文四问

- <font color=red>1. 针对什么问题？</font>
  - 
- <font color=red>2. 采用什么方法？</font>
  - 
- <font color=red>3. 达到什么效果？</font>
  - 
- <font color=red>4. 存在什么不足？</font>
  - 

## 0. 摘要

- 对于回环闭合问题，很少有工作将三维场景作为语义SLAM系统的一个组成部分进行比较。
- 本文介绍了SmSLAM+LCD系统，将高层三维语义信息与低层特征信息结合，有效实现闭环检测、降低漂移。

---

## 1. Introduction

- **完全依靠几何特征**来检测闭环、补偿漂移误差的方法，在**相似场景或环境外观变化**时会遇到问题，因此考虑使用语义信息帮助完成闭环。

- **A. 相关工作**

  - 1）<font color=orange>**语义SLAM**</font>：
    - 语义SLAM方法专注于表示、建图和定位3D物体。
      - **SLAM++** [2] 开创性使用先验物体模型与RGB-D点云匹配构建物体网络。[3] 则完全使用单目输入搭建物体SLAM，并从先验物体模型中学习地图尺度比例。**QuadricSLAM** [4] 和**CubeSLAM** [5] 抛开对先验物体模型的需求，分别对物体构建简化的二次曲面和长方体表示，但都没有解决回环闭合问题。[6] 中基于RGB-D SLAM的语义增强的3D点云，使用 octomap 表示物体。

  - 2）<font color=orange>**语义回环检测**</font>：
    - ① 提取语义信息，构建图像描述符，用于比较和查找来自同一场景的图像。
      - 语义信息可以用向量编码，区别在于如何构造语义向量：Yang等人[7]中生成的语义向量对图像中呈现的物体类信息进行编码；Hu等人[8]中创建的语义向量对物体类、置信度和边界框形状进行编码；Merill和Huang[9]则利用深度学习方法构建了多解码器变分自编码器（VAE），对视觉外观和语义信息进行编码，构建了一个全局图像描述符。
    
    - ② 修剪动态物体特征或非区分性特征
      - Chen等人[10]中屏蔽了回环闭合候选图像中的动态物体，消除实例级语义不一致的干扰，其余特征使用[11]的几何验证；Mousavian等[12]则丢弃植被、天空、道路等非区分性特征，仅将人工结构转换为词袋向量，提高了位置识别的精度。
    
    - ③ 将语义信息编码在图结构中，由此保留了语义地标间的结构信息
      - Wang等人[13]和Cascianelli等人[14]都为此引入了共视图，闭环检测所查询的图像相似度由两部分组成：地标顶点相似度和顶点邻近信息相似度。两篇文章都使用CNN特征和地标区域形状表示地标，[13]使用随机游走描述符来比较每个图像子图中节点的相邻信息，而[14]选择使用邻接矩阵。
    
    - 这些方法都没有将回环检测集成到运行的语义SLAM系统中，也没有利用语义SLAM系统生成的多模态。
    
  - 3）<font color=orange>**集成到语义SLAM系统的语义回环闭合**</font>：
    - Liu等人[15]从RGB-D语义SLAM构建的稠密地图中提取全局语义图结构，使用随机游走描述符查询图中节点与全局语义图结构中的节点进行匹配，利用物体点云存储的三维信息进行粗匹配，即使不完全匹配，也可以通过对齐和匹配相关语义点来执行。Li等人[16]利用单目构建长方体语义地标，对候选图像、相似图像中的语义地标进行相似度变换，这种方法耗时且未考虑场景中物体的结构信息。
  
- **B. 总结**

  - 本文介绍了一种新的单目语义SLAM系统回环检测和漂移校正方法，称为SmSLAM+LCD（semantic SLAM + loop closure detection），主要贡献为：

    - 一种将语义物体信息组织成三维语义共视图结构的新方法

    - 一种分层闭环检测方法，首先基于低级几何特征提出候选，然后对比三维语义共视图检验候选

    - 一种从粗到细的闭环候选项SIM(3)计算方法

    - 一个虚拟数据集和一个真实数据集

    - 有效性测试

---

## 2. 系统概述

- 将回环闭合方法嵌入到[17]中开发的语义SLAM系统中，该系统具有语义物体检测、跟踪和建图功能，蓝色部分为本文共享。
- 使用ORB-SLAM2的跟踪模块提供视觉里程计，使用YOLOv3[18]检测图像中的物体，在感兴趣区域提取ORB特征，转换为词袋向量描述检测物体。最后执行物体级数据关联，将检测物体与地图物体匹配。
- 语义物体检测和跟踪组件生成新的语义关键帧，更新的地图数据库中包含地图物体和语义关键帧之间的关系，从每个关键帧中构件的物体进一步组织成物体共视关系图结构，为闭环检测提供了依据。

<img src="https://api2.mubu.com/v3/document_image/8b0561cd-3c8c-496b-bfec-dd2cdb63f53a-5321924.jpg" alt="image" style="zoom:50%;" />

---

## 3. 物体共视图

- **A. 图结构定义**
  - 顶点即3D语义物体地标，每个建图物体都与标签概率分布关联，以捕获感知不确定性。携带的信息包括：包络椭球体的主轴长度，物体中心位置，顶点概率，物体的观测帧集，从包含物体的图像块中计算的词袋向量。
  
  - 边：至少三次在同一语义关键帧被观测的物体的顶点之间添加边。
  
- **B. 图结构构建与维护**
- 创建新的语义关键帧时更新物体共视图结构，如果观察到新的物体，则添加到顶点集，如果观察到共视3次，则创建边。

<img src="https://api2.mubu.com/v3/document_image/4ec1e520-d8ea-47ec-b801-c3660ec09020-5321924.jpg" alt="img" style="zoom:50%;" />

---

## 4. 语义回环检测

- **A. 回环候选项检测**

  - 计算当前关键帧与已建图关键帧抽取闭环候选项的词袋相似度分值，相似度评分公式如下：

  $$
  s\left(\mathbf{d}_{c}, \mathbf{d}_{l}\right)=1-0.5\left|\mathbf{d}_{c} /\right| \mathbf{d}_{c}\left|-\mathbf{d}_{l} /\right| \mathbf{d}_{l}||
  $$

- **B. 子图构建**

  - 对于候选关键帧，通过比较对应的共视子图验证是否为同一位置，这些共视子图由存储在地图中的物体共视图结构产生。

- **C. 顶点建图**

  - 为了表示两个公式子图，需要建立两个子图中地图物体的对应关系...

- **D. 顶点比较**

- **E. 边的比较**

- **F. SIM(3) 的细化**

  - 使用最后的SIM(3)变换来校正漂移误差

<img src="https://api2.mubu.com/v3/document_image/9c2ec063-d098-498c-bcd2-eb09c5e1f234-5321924.jpg" alt="img" style="zoom:50%;" />

---

## 5. Experiment Evaluation

- A. TUM数据集结果
- B. 虚拟数据集结果
- C. 真实场景数据集结果

---

## 6. Conclusion

- 使用SmSLAM+LCD构建3D物体共视图结构并不断更新，用从粗到细的方法进行闭环检测和漂移纠正。与ORB-SLAM2和ORB-SLAM3相比展现出了更准确的漂移校正，也避免了回环闭合中的假阳性。
- 本文中，假设每个物体对回环闭合的确认/否认做出同等贡献，作者认为未来工作中：可以修改为**以不同方式处理静态和动态物体**，另外可以在**共视图结构中增加权重**以改进闭环检测。